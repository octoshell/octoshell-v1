- title 'Статистика по отчетам'

javascript:
  window.chartEvents = {
    load: function(chart){
      $(chart.currentTarget.renderTo).addClass('tab-pane')
    }
  }

h2 Число организаций по типам

ul class="nav nav-tabs"
  li class="active" = link_to 'Таблица', '#organizations_count_by_kind_table', data: { toggle: 'tab' }
  li = link_to 'Диаграмма', '#organizations_count_by_kind_bar', data: { toggle: 'tab' }
  li = link_to 'Пирог', '#organizations_count_by_kind_pie', data: { toggle: 'tab' }

div class="tab-content"
  div class="tab-pane active" id="organizations_count_by_kind_table"
    table class="table table-bordered"
      - @stats.organizations_count_by_kind.each do |title, value|
        tr
          th class="span4" = title
          td = value
  div id="organizations_count_by_kind_bar"
  div id="organizations_count_by_kind_pie"

javascript:
  new Highcharts.Chart({
    chart: {
      renderTo: 'organizations_count_by_kind_bar',
      type: 'column',
      events: window.chartEvents
    },
    title: {
      text: ''
    },
    yAxis: {
      title: {
        text: 'Количество'
      }
    },
    plotOptions: {
      column: {
        dataLabels: {
          enabled: true
        }
      }
    },
    series: #{@stats.organizations_count_by_kind.to_chart(:column).html_safe}
  });
  
  new Highcharts.Chart({
    chart: {
      renderTo: 'organizations_count_by_kind_pie',
      type: 'column',
      events: window.chartEvents
    },
    title: {
      text: ''
    },
    plotOptions: {
      pie: {
        allowPointSelect: true,
        cursor: 'pointer',
        dataLabels: {
          enabled: true,
          color: '#000000',
          connectorColor: '#000000',
          formatter: function() {
            return '<b>'+ this.point.name +'</b>: '+ this.percentage.toFixed(1) +' %';
          }
        }
      }
    },
    series: #{@stats.organizations_count_by_kind.to_chart(:pie, name: 'Количество').html_safe}
  })

h2 Число проектов по типам организаций

ul class="nav nav-tabs"
  li class="active" = link_to 'Таблица', '#projects_count_by_organization_kind_table', data: { toggle: 'tab' }
  li = link_to 'Диаграмма', '#projects_count_by_organization_kind_bar', data: { toggle: 'tab' }
  li = link_to 'Пирог', '#projects_count_by_organization_kind_pie', data: { toggle: 'tab' }

div class="tab-content"
  div class="tab-pane active" id="projects_count_by_organization_kind_table"
    table class="table table-bordered"
      - @stats.projects_count_by_organization_kind.each do |title, value|
        tr
          th class="span4" = title
          td = value
  div id="projects_count_by_organization_kind_bar"
  div id="projects_count_by_organization_kind_pie"

javascript:
  new Highcharts.Chart({
    chart: {
      renderTo: 'projects_count_by_organization_kind_bar',
      type: 'column',
      events: window.chartEvents
    },
    title: {
      text: ''
    },
    yAxis: {
      title: {
        text: 'Количество'
      }
    },
    plotOptions: {
      column: {
        dataLabels: {
          enabled: true
        }
      }
    },
    title: 'Число организаций по типам',
    series: #{@stats.projects_count_by_organization_kind.to_chart(:column).html_safe}
  });

  new Highcharts.Chart({
    chart: {
      renderTo: 'projects_count_by_organization_kind_pie',
      type: 'column',
      events: window.chartEvents
    },
    title: {
      text: ''
    },
    plotOptions: {
      pie: {
        allowPointSelect: true,
        cursor: 'pointer',
        dataLabels: {
          enabled: true,
          color: '#000000',
          connectorColor: '#000000',
          formatter: function() {
            return '<b>'+ this.point.name +'</b>: '+ this.percentage.toFixed(1) +' %';
          }
        }
      }
    },
    series: #{@stats.projects_count_by_organization_kind.to_chart(:pie, name: 'Количество').html_safe}
  })

h2 Направления исследований

ul class="nav nav-tabs"
  li class="active" = link_to 'Таблица', '#directions_of_science_by_count_table', data: { toggle: 'tab' }
  li = link_to 'Диаграмма', '#directions_of_science_by_count_bar', data: { toggle: 'tab' }
  li = link_to 'Пирог', '#directions_of_science_by_count_pie', data: { toggle: 'tab' }

div class="tab-content"
  div class="tab-pane active" id="directions_of_science_by_count_table"
    table class="table table-bordered"
      - @stats.directions_of_science_by_count.each do |title, value|
        tr
          th class="span4" = title
          td = value
  div id="directions_of_science_by_count_bar"
  div id="directions_of_science_by_count_pie"

javascript:
  new Highcharts.Chart({
    chart: {
      renderTo: 'directions_of_science_by_count_bar',
      type: 'column',
      events: window.chartEvents
    },
    title: {
      text: ''
    },
    yAxis: {
      title: {
        text: 'Количество'
      }
    },
    plotOptions: {
      column: {
        dataLabels: {
          enabled: true
        }
      }
    },
    title: 'Число организаций по типам',
    series: #{@stats.directions_of_science_by_count.to_chart(:column).html_safe}
  });

  new Highcharts.Chart({
    chart: {
      renderTo: 'directions_of_science_by_count_pie',
      type: 'column',
      events: window.chartEvents
    },
    title: {
      text: ''
    },
    plotOptions: {
      pie: {
        allowPointSelect: true,
        cursor: 'pointer',
        dataLabels: {
          enabled: true,
          color: '#000000',
          connectorColor: '#000000',
          formatter: function() {
            return '<b>'+ this.point.name +'</b>: '+ this.percentage.toFixed(1) +' %';
          }
        }
      }
    },
    series: #{@stats.directions_of_science_by_count.to_chart(:pie, name: 'Количество').html_safe}
  })


h3 Направления исследований по подразделениям МГУ

ul class="nav nav-tabs"
  li class="active" = link_to 'Таблица', '#directions_of_science_count_by_msu_subdivistions_table', data: { toggle: 'tab' }
  li = link_to 'Диаграмма', '#directions_of_science_count_by_msu_subdivistions_bar', data: { toggle: 'tab' }

div class="tab-content"
  div class="tab-pane active" id="directions_of_science_count_by_msu_subdivistions_table"
    table class="table table-bordered"
      tr
        th Подразделение
        th Направления исследований
      - @stats.directions_of_science_count_by_msu_subdivistions.each do |title, value|
        tr
          th class="span4" = title
          td
            table class="table table-bordered table-condensed"
              - value.each do |direction, count|
                tr
                  td = direction
                  td class="span1" = count
  div id="directions_of_science_count_by_msu_subdivistions_bar"

javascript:
  new Highcharts.Chart({
    chart: {
      renderTo: 'directions_of_science_count_by_msu_subdivistions_bar',
      type: 'column',
      events: window.chartEvents
    },
    title: {
      text: ''
    },
    yAxis: {
      title: {
        text: 'Количество'
      }
    },
    plotOptions: {
      column: {
        dataLabels: {
          enabled: true
        }
      }
    },
    title: 'Число организаций по типам',
    series: #{@stats.directions_of_science_count_by_msu_subdivistions_bar.to_json.html_safe}
  });

h2 Суммы

h4 Число опубликованных научных работ, в которых использованы данные, полученные на суперкомпьютерном комплексе МГУ

table class="table table-bordered table-condensed"
  tr
    th class="span6" Число опубликованных статей по проекту за год
    td = @stats.books_count
  tr
    th class="span6" Число учебников и монографий
    td = @stats.vacs_count
  tr
    th class="span6" Число тезисов докладов
    td = @stats.lectures_count
  tr
    th class="span6" Всего
    td = @stats.publications_count
