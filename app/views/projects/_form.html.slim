= simple_form_for @project, html: { class: 'form-horizontal surety-form project' } do |f|
  table
    tr
      td = f.input :name
      td = f.input :en_name
    tr
      td = f.input :driver, input_html: { rows: 4 }
      td = f.input :en_driver, input_html: { rows: 4 }
    tr
      td = f.input :strategy, input_html: { rows: 4 }
      td = f.input :en_strategy, input_html: { rows: 4 }
    tr
      td = f.input :objective, input_html: { rows: 4 }
      td = f.input :en_objective, input_html: { rows: 4 }
    tr
      td = f.input :impact, input_html: { rows: 4 }
      td = f.input :en_impact, input_html: { rows: 4 }
    tr
      td = f.input :usage, input_html: { rows: 4 }
      td = f.input :en_usage, input_html: { rows: 4 }
  
  = f.association :direction_of_sciences, as: :check_boxes, required: true
  = f.association :critical_technologies, as: :check_boxes, required: true
  = f.association :research_areas, as: :check_boxes, required: true
  
  = f.association :organization, collection: f.object.allowed_organizations, input_html: { class: 'chosen' }
  = f.association :organizations, input_html: { class: 'chosen' }, collection: Organization.order("name asc")
  = f.association :project_prefix, include_blank: true
  
  - if f.object.new_record? && !f.object.user.sured?
    legend = t('.surety', default: 'Surety')
    = f.simple_fields_for :sureties do |f|
      = f.input :boss_full_name
      = f.input :boss_position
      = f.input :cpu_hours
      = f.input :gpu_hours
      = f.input :size
      legend = t('.members', default: 'Members')
      div class="members"
        = f.simple_fields_for :surety_members do |f|
          div class="control-group members-form #{'error' if f.object.errors.any?}"
            label class="control-label"
              = t('.user', default: 'User')
            div class="controls"
              = f.text_field :email, placeholder: 'user@example.com', class: 'email', id: nil
              |  
              = f.text_field :full_name, placeholder: 'Иванов Иван Иванович', class: 'full-name', id: nil
              |  
              = link_to '✗', '#', class: 'remove-member danger'
              - if f.object.errors.any?
                p class="help-inline" = f.object.errors.full_messages.join(', ')
      div class="controls"
        p = link_to t('.add_member'), "#", class: 'add-member-row'
  div class="form-actions"
    = f.button :submit, class: 'btn-primary'
